<div class="backgroundSection">
  <div class="container">
    <div class="gear-menu">
      <div *ngFor="let item of menuItems">
        <span>{{item.name}} <img [src]="item.icon"></span>
      </div>
    </div>

    <div class="col-md-4">
      <div class="healthBarSection">
        <div class="healthBarContainer">
          <div class="healthBarLevelText">{{playerLevel}}</div>
          <img [src]="healthBar">
          <span class="healthText">{{health}}</span>
          <span class="manaText">{{mana}}</span>
        </div>
        <div class="playerBuffSection">
          <div *ngFor="let buff of playerBuffs">
            <img [src]="buff.icon" (mouseover)="showBuffOverlay(buff)" (mouseleave)="hideBuffOverlay()">
          </div>
          <div *ngIf="(playerBuffOverlay | json) != '{}'" class="buffOverlay">
            <img class="playerBuffOverlayIcon" [src]="playerBuffOverlay.icon">
            <div class="playerBuffOverlayBuffText">
              Buff
              <div>{{playerBuffOverlay.title}}</div>
            </div>
            <div class="playerBuffOverlayBuffDesc" id="buffDesc"></div>
          </div>
        </div>

      </div>
      <div class="player-info-card">
        <div class="inner-info-card-section">
          <h4 class="infoText">Character Info</h4>
          <div class="levelSection">
            <span class="levelText">Level</span>
            <input class="levelInputBox" [(ngModel)]="playerLevel" (change)="checkPlayerLevel()">
          </div>
          <div class="titleSection">
            Title
            <span class="playerInfoText">{{playerTitle.title}}</span>
            <button class="wrench-button fa fa-wrench" (click)="openTitleModal()"></button>
          </div>
          <div class="equipmentPointsSection">
            <div>
              Equipment Points
              <span class="playerInfoText">{{equipPoints}}</span>
            </div>
          </div>
          <div class="damageSection">
            <div>
              Melee Attack
              <span class="playerInfoText">{{meleeAttack}}</span>
            </div>
            <div>
              Ranged Attack
              <span class="playerInfoText">{{rangedAttack}}</span>
            </div>
            <div>
              Magic Attack
              <span class="playerInfoText">{{magicAttack}}</span>
            </div>
            <div>
              Healing Power
              <span class="playerInfoText">{{healingPower}}</span>
            </div>
            <div>
              Physical Defense
              <span class="playerInfoText">{{physicalDefense}}</span>
            </div>
            <div>
              Magic Defense
              <span class="playerInfoText">{{magicDefense}}</span>
            </div>
          </div>
          <div class="attributeSection">
            <div class="attributeText">
              Strength
              <span class="playerInfoText firstColumnAttributeText">{{strength}}</span>
            </div>
            <div class="attributeText">
              Spirit
              <span class="playerInfoText">{{spirit}}</span>
              <button class="wrench-attribute-button fa fa-wrench" (click)="openAttributeModal()"></button>
            </div>
            <div class="attributeText">
              Intelligence
              <span class="playerInfoText firstColumnAttributeText">{{intelligence}}</span>
            </div>
            <div class="attributeText">
              Stamina
              <span class="playerInfoText">{{stamina}}</span>
            </div>
            <div class="attributeText">
              Agility
              <span class="playerInfoText firstColumnAttributeText">{{agility}}</span>
            </div>
          </div>
          <div class="generalAttackStatsSection">
            <div>
              Move Speed
              <span class="playerInfoText">{{moveSpeed}} m/s</span>
            </div>
            <div>
              Cast time
              <span class="playerInfoText">{{castTime}} %</span>
            </div>
            <div>
              Attack Speed
              <span class="playerInfoText">{{attackSpeed}} %</span>
              <button class="tasks-button fa fa-tasks"></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slotContainer">
      <table>
        <tr>
          <td>
            <div *ngFor="let slot of itemsSlots" [class]="slot.class">
              <img [src]="slot.icon" *ngIf="slot.float === 'middle'" class="slotIcon">
            </div>
          </td>
        </tr>
        <tr>
          <td class="slot-column-1">
            <div *ngFor="let slot of itemsSlots" >
              <div *ngIf="slot.float === 'left'" [class]="slot.class">
                <img [src]="slot.icon" class="slotIcon">
              </div>
            </div>
          </td>
          <td  class="slot-column-2">
            <div *ngFor="let slot of itemsSlots">
              <div *ngIf="slot.float === 'right'" [class]="slot.class">
                <img [src]="slot.icon" class="slotIcon">
              </div>
            </div>
          </td>
        </tr>
      </table>
      <div class="saveButtonContainer">
        <button class="saveButton">Save</button>
      </div>
    </div>
    <div *ngIf="showTitleModal === true">
      <div class="overlay"></div>
      <div  class="titleModalContainer">
        <div class="modalContent">
          <span class="fa fa-times titleCloseButton" (click)="closeTitleModal()"></span>
          <input class="titleSearchBox" placeholder="title name..." [(ngModel)]="newTitleSearch" [disabled]="!hasTitleData">
          <div *ngIf="!hasTitleData" class="titleLoadingData">Loading Data...</div>
          <div *ngIf="hasTitleData" class="title-modal-outer-content">
            <div *ngFor="let title of titles | titleSearch:newTitleSearch">
              <div *ngIf="title.description !== ''">
                <div (click)="setNewTitle(title)" class="titleItem">{{title.title}}</div>
              </div>
            </div>
          </div>
          <div *ngIf="hasTitleData" class="title-overlay"></div>
          <button class="titleResetButton" (click)="resetTitle()" [disabled]="!hasTitleData">Reset</button>
        </div>
      </div>
    </div>
    <div *ngIf="showAttributeModal === true">
      <div class="overlay"></div>
      <div  class="attributeModalContainer">
        <div class="modalContent">
          <span class="attributeSectionTitle">Stat Migration</span>
          <span class="fa fa-times attributeCloseButton" (click)="closeAttributeModal()"></span>
          <div class="applicableStatsSection">
            Applicable Stats
            <span class="applicableStatsText">{{applicableStats}}</span>
          </div>
          <div class="attributeStrengthSection">
            <img [src]="strengthStatIcon">
            <span class="strengthTitle">Strength</span>
            <input [(ngModel)]="strengthMigrationStat" (change)="strengthMigrationChange()">
            <span class="statCalculation">
              (158<span id="strengthId"></span>)
            </span>
          </div>
          <div class="attributeAgilitySection">
            <img [src]="agilityStatIcon">
            <span class="agilityTitle">Agility</span>
            <input [(ngModel)]="agilityMigrationStat" (change)="agilityMigrationChange()">
            <span class="statCalculation">
              (158<span id="agilityId"></span>)
            </span>
          </div>
          <div class="attributeStaminaSection">
            <img [src]="staminaStatIcon">
            <span class="staminaTitle">Stamina</span>
            <input [(ngModel)]="staminaMigrationStat" (change)="staminaMigrationChange()">
            <span class="statCalculation">
              (158<span id="staminaId"></span>)
            </span>
          </div>
          <div class="attributeIntelligenceSection">
            <img [src]="intelligenceStatIcon">
            <span class="intelligenceTitle">Intelligence</span>
            <input [(ngModel)]="intelligenceMigrationStat" (change)="intelligenceMigrationChange()">
            <span class="statCalculation">
              (158<span id="intelligenceId"></span>)
            </span>
          </div>
          <div class="attributeSpiritSection">
            <img [src]="spiritStatIcon">
            <span class="spiritTitle">Spirit</span>
            <input [(ngModel)]="spiritMigrationStat" (change)="spiritMigrationChange()">
            <span class="statCalculation">
              (158<span id="spiritId"></span>)
            </span>
          </div>
          <div class="appliedStatsSection">
            Applied Stats
            <span class="appliedStatsSectionText">
              <span class="appliedStatsText">{{appliedStats}}</span>/<span class="maxAppliedStatsText">300</span>
            </span>
          </div>
          <div class="attributeButtonContainer">
            <button class="attributeResetButton" (click)="resetStatAttributes()">Reset</button>
            <button class="attributeApplyButton" [disabled]="pendingPoints !== 300">Apply</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
